erDiagram
    USERS ||--o{ ORDERS : places
    USERS ||--o{ REVIEWS : writes
    USERS ||--o{ CART_ITEMS : has
    USERS ||--o{ ADDRESSES : has
    USERS ||--o{ PAYMENT_METHODS : has
    
    ORDERS ||--|{ ORDER_ITEMS : contains
    ORDERS ||--o| PAYMENTS : has
    ORDERS ||--o| SHIPPING : has
    
    PRODUCTS ||--o{ ORDER_ITEMS : "ordered in"
    PRODUCTS ||--o{ CART_ITEMS : "added to"
    PRODUCTS ||--o{ REVIEWS : receives
    PRODUCTS ||--o{ PRODUCT_IMAGES : has
    PRODUCTS }o--|| CATEGORIES : "belongs to"
    PRODUCTS }o--o| BRANDS : "belongs to"
    
    CATEGORIES ||--o{ CATEGORIES : "has subcategories"
    
    USERS {
        int user_id PK
        string email UK
        string password_hash
        string first_name
        string last_name
        string phone
        datetime created_at
        datetime last_login
        boolean is_active
    }
    
    PRODUCTS {
        int product_id PK
        string name
        text description
        decimal price
        int stock_quantity
        int category_id FK
        int brand_id FK
        string sku UK
        datetime created_at
        datetime updated_at
        boolean is_active
    }
    
    CATEGORIES {
        int category_id PK
        string name
        text description
        int parent_category_id FK
        string slug UK
    }
    
    BRANDS {
        int brand_id PK
        string name
        text description
        string logo_url
    }
    
    ORDERS {
        int order_id PK
        int user_id FK
        decimal total_amount
        decimal tax_amount
        decimal shipping_cost
        string status
        int shipping_address_id FK
        datetime order_date
        datetime updated_at
    }
    
    ORDER_ITEMS {
        int order_item_id PK
        int order_id FK
        int product_id FK
        int quantity
        decimal unit_price
        decimal subtotal
    }
    
    CART_ITEMS {
        int cart_item_id PK
        int user_id FK
        int product_id FK
        int quantity
        datetime added_at
    }
    
    REVIEWS {
        int review_id PK
        int product_id FK
        int user_id FK
        int rating
        text comment
        datetime created_at
        boolean is_verified_purchase
    }
    
    ADDRESSES {
        int address_id PK
        int user_id FK
        string address_type
        string street_address
        string city
        string state
        string postal_code
        string country
        boolean is_default
    }
    
    PAYMENT_METHODS {
        int payment_method_id PK
        int user_id FK
        string payment_type
        string card_last_four
        string card_brand
        datetime expiry_date
        boolean is_default
    }
    
    PAYMENTS {
        int payment_id PK
        int order_id FK
        int payment_method_id FK
        decimal amount
        string payment_status
        string transaction_id
        datetime payment_date
    }
    
    SHIPPING {
        int shipping_id PK
        int order_id FK
        string carrier
        string tracking_number
        string shipping_status
        datetime shipped_date
        datetime estimated_delivery
        datetime delivered_date
    }
    
    PRODUCT_IMAGES {
        int image_id PK
        int product_id FK
        string image_url
        int display_order
        boolean is_primary
    }